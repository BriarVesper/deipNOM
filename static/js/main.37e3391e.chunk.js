(this.webpackJsonpdeipnon=this.webpackJsonpdeipnon||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},47:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(13),a=n.n(r),s=(n(27),n(6)),o=n(2),u=n(21),d=n.n(u),l=n(3),j=n.n(l),p=n(8),b=n(4),f=Object(c.createContext)(),O=Object(c.createContext)(),h=f,v=n(0);var m=function(e){var t=e.placeholder,n=Object(c.useState)(""),i=Object(o.a)(n,2),r=i[0],a=i[1];return[r,Object(v.jsx)("div",{children:Object(v.jsx)("input",{className:"add-recipe-input small-input",type:"text",value:r,onChange:function(e){a(e.target.value)},placeholder:t})})]};var x=function(e){var t=e.placeholder,n=Object(c.useState)(""),i=Object(o.a)(n,2),r=i[0],a=i[1];return[r,Object(v.jsx)("div",{children:Object(v.jsx)("textarea",{className:"add-recipe-input big-input",type:"text",value:r,onChange:function(e){a(e.target.value)},placeholder:t})})]},g=n(22),N=n.n(g),R=n(5);var S=function(e){var t=e.handleAddThumbnail,n=(e.image,i.a.createRef()),c=i.a.createRef(),r=function(e){new N.a(e,{quality:.5,maxWidth:400,maxHeight:400,success:function(e){t(e)}})};return Object(v.jsxs)("div",{className:"form-group",children:[Object(v.jsx)("input",{type:"file",className:"thumbnail-input",onChange:function(e){var t=e.target.files[0];if(t){r(t);var n=URL.createObjectURL(t);c.style.backgroundImage="url("+n+")"}},style:{display:"none"},ref:function(e){return n=e}}),Object(v.jsx)("div",{className:"add-recipe-thumbnail",onClick:function(){n.click()},ref:function(e){return c=e},children:Object(v.jsx)(R.c,{})})]})},y=n(7),C=function(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useContext)(h).dispatchRecipeEvent,a=function(e){return e&&0!==e.trim().length?e.split(/[\n,]+/).map((function(e){return e.trim()})).map((function(e){return Object(y.parse)(e,"eng")})):[{}]},s=m({placeholder:"title"}),u=Object(o.a)(s,2),d=u[0],l=u[1],j=m({placeholder:"description"}),p=Object(o.a)(j,2),b=p[0],f=p[1],O=m({placeholder:"source"}),g=Object(o.a)(O,2),N=g[0],R=g[1],C=x({placeholder:"ingredients (comma or newline separated)"}),w=Object(o.a)(C,2),k=w[0],E=w[1],I=x({placeholder:"instructions"}),P=Object(o.a)(I,2),A=P[0],J=P[1];return Object(v.jsxs)("div",{id:"add-recipe",children:[Object(v.jsx)("h3",{className:"add-recipe-header",children:"Add New Recipe"}),Object(v.jsxs)("div",{className:"add-recipe-top-container",children:[Object(v.jsx)(S,{handleAddThumbnail:function(e){i(e)},image:n}),Object(v.jsxs)("div",{className:"small-inputs",children:[l,f,R]})]}),Object(v.jsxs)("div",{className:"add-recipe-btm-container",children:[E,J,Object(v.jsx)("button",{onClick:function(){var e=JSON.stringify(a(k));r("ADD",{newRecipe:{title:d,description:b,source:N,ingredients:e,instructions:A},thumbnail:n})},children:"Add Recipe"})]})]})},w=function(e){var t=e.recipe,n=Object(c.useContext)(h).dispatchRecipeEvent,i=Object(c.useContext)(O).handleSelectedRecipe;return Object(v.jsxs)("div",{className:"recipe-item",style:{backgroundImage:"url("+t.image+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[Object(v.jsxs)("div",{className:"header",children:[Object(v.jsx)("div",{className:"title",children:t.title}),Object(v.jsx)("button",{className:"select icon-button-small",onClick:function(){i(t)},children:Object(v.jsx)(R.b,{})})]}),Object(v.jsx)("div",{className:"middle",children:Object(v.jsx)("small",{children:t.description})}),Object(v.jsxs)("div",{className:"footer",children:[Object(v.jsx)("button",{onClick:function(){n("REMOVE",{id:t._id})},className:"icon-button-small",children:Object(v.jsx)(R.d,{})}),Object(v.jsx)("button",{onClick:function(){n("OPEN_EDIT",{id:t._id})},className:"icon-button-small",children:Object(v.jsx)(R.a,{})})]})]})},k=function(){var e=Object(c.useContext)(h).recipes;return Object(v.jsxs)("div",{id:"recipe-list",children:[Object(v.jsx)("div",{className:"recipe-list-header",children:Object(v.jsx)("h3",{children:"Recipes"})}),Object(v.jsx)("div",{className:"list",children:e.map((function(e){return Object(v.jsx)(w,{recipe:e},e._id)}))})]})},E=n(14),I=n.n(E),P=(n(20),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"450px"}});I.a.setAppElement("#root");var A=function(e){var t,n=e.isOpen,i=void 0!==n&&n,r=e.handleSetIsOpen,a=e.recipeToEdit,s=Object(c.useContext)(h).dispatchRecipeEvent,u=Object(c.useState)(i),d=Object(o.a)(u,2),l=d[0],j=d[1];function b(){r(!1)}Object(c.useEffect)((function(){j(i)}),[i]);var f=function(e){return e&&0!==e.trim().length?e.split(/[\n,]+/).map((function(e){return e.trim()})).map((function(e){return Object(y.parse)(e,"eng")})):[{}]},O=m({placeholder:a.title||"title"}),g=Object(o.a)(O,2),N=g[0],S=g[1],C=m({placeholder:a.description||"description"}),w=Object(o.a)(C,2),k=w[0],E=w[1],A=m({placeholder:a.source||"source"}),J=Object(o.a)(A,2),D=J[0],_=J[1],T=x({placeholder:"ingredients"}),L=Object(o.a)(T,2),F=L[0],Q=L[1],M=x({placeholder:a.instructions||"instructions"}),q=Object(o.a)(M,2),B=q[0],U=q[1];return Object(v.jsx)("div",{children:Object(v.jsx)(I.a,{isOpen:l,onAfterOpen:function(){console.log(a),t.style.color="#cb9eff"},onRequestClose:b,style:P,contentLabel:"Edit Recipe",children:Object(v.jsxs)("div",{id:"add-recipe",children:[Object(v.jsxs)("h3",{className:"add-recipe-header",children:["Editing ",a.title]}),Object(v.jsxs)("div",{className:"add-recipe-top-container",children:[Object(v.jsx)("div",{className:"add-recipe-thumbnail",ref:function(e){return t=e},onClick:function(e){console.log("TODO")},children:Object(v.jsx)(R.c,{})}),Object(v.jsxs)("div",{className:"small-inputs",children:[S,E,_]})]}),Object(v.jsxs)("div",{className:"add-recipe-btm-container",children:[Q,U,Object(v.jsx)("button",{onClick:function(){var e=0!==F.length?JSON.stringify(f(F)):JSON.stringify(a.ingredients),t=Object(p.a)(Object(p.a)({},a),{},{title:N||a.title,description:k||a.description,source:D||a.source,ingredients:e,instructions:B||a.instructions});s("EDIT",{updatedRecipe:t}),b()},children:"Edit Recipe"}),Object(v.jsx)("button",{className:"cancel-button",onClick:b,children:"Cancel"})]})]})})})},J=void 0,D=localStorage,_={getAllRecipes:function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){e(JSON.parse(localStorage.getItem("recipes")))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),submit:function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=J.getAllRecipes();c=[].concat(Object(s.a)(c),[t]),e(D.setItem(JSON.stringify(c)))})).then((function(e){n&&n(e)})).catch((function(e){c&&c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),remove:function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=J.getAllRecipes(),i=c.findIndex((function(e){return e._id===t}));-1===i&&n(new Error("ID not found")),c.splice(i,1),e(D.setItem("recipes",JSON.stringify(c)))})).then((function(e){n&&n(e)})).catch((function(e){c&&c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),edit:function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=J.getAllRecipes(),i=c.findIndex((function(e){return e._id===t._id}));-1===i&&n(new Error("ID not found")),c[i]=t,e(D.setItem("recipes",JSON.stringify(c)))})).then((function(e){n&&n(e)})).catch((function(e){c&&c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()};var T=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),a=Object(o.a)(r,2),u=a[0],d=a[1],l=Object(c.useState)({}),f=Object(o.a)(l,2),O=f[0],m=f[1],x=function(){return d(!u)};Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAllRecipes();case 2:t=e.sent,n=(t||[]).map((function(e){return Object(p.a)(Object(p.a)({},e),{},{ingredients:JSON.parse(e.ingredients)})})),i(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var g=function(){var e=Object(b.a)(j.a.mark((function e(t){var c,r,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.newRecipe,r=t.thumbnail,c.title&&c.title.trim()){e.next=4;break}return e.abrupt("return",null);case 4:if(!r){e.next=9;break}return e.next=7,N(r);case 7:a=e.sent,c.image=a;case 9:_.submit({recipe:c},(function(e){var t=e.data;t.ingredients=JSON.parse(t.ingredients),i([].concat(Object(s.a)(n),[t])),console.log(e)}),(function(e){console.log(e)}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.uploadThumbnail(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(e){_.remove(e.id,(function(e){var t=e.data;i(n.filter((function(e){return e._id!==t._id})))}),(function(e){console.log(e)}))},S=function(e){var t=n.find((function(t){return t._id===e.id}));m(t),x()},y=function(e){var t=e.updatedRecipe;_.edit({recipe:t},(function(e){var t=e.data;t.ingredients=JSON.parse(t.ingredients);var n=w(t);i(n),console.log(e)}),(function(e){console.log(e)}))},w=function(e){var t=n.findIndex((function(t){return t._id===e._id})),c=Object(s.a)(n);return c[t]=e,c};return Object(v.jsx)("div",{id:"recipe-page",children:Object(v.jsxs)(h.Provider,{value:{recipes:n,dispatchRecipeEvent:function(e,t){switch(e){case"ADD":return void g(t);case"REMOVE":return void R(t);case"OPEN_EDIT":return void S(t);case"EDIT":return void y(t);default:return}}},children:[Object(v.jsx)(A,{isOpen:u,handleSetIsOpen:x,recipeToEdit:O}),Object(v.jsx)(C,{}),Object(v.jsx)(k,{})]})})},L=function(){var e=Object(c.useContext)(O).selectedRecipes,t=Object(c.useState)([]),n=Object(o.a)(t,2),i=n[0],r=n[1];Object(c.useEffect)((function(){var t=[];if(0!==e.length){var n=e.map((function(e){return e.ingredients})).reduce((function(e,t){return e.concat(t)})).map((function(e){return e}));t=Object(y.combine)(n).map((function(e){return a(e)}))}r(t)}),[e]);var a=function(e){return e.unit?1===e.maxQty?e.maxQty+" "+e.unit+" of "+e.ingredient:e.maxQty+" "+e.unitPlural+" of "+e.ingredient:e.maxQty+" "+e.ingredient};return Object(v.jsxs)("div",{id:"shopping-list",children:[Object(v.jsx)("h3",{className:"header",children:"Shopping List"}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"list",children:Object(v.jsx)("ul",{children:i.map((function(e,t){return Object(v.jsx)("li",{children:e},t)}))})})]})},F=function(e){var t=e.recipe,n=e.toRemove,i=Object(c.useContext)(O).handleRemoveSelectedRecipe;return Object(v.jsx)("div",{className:"selected-recipe-item",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:function(){i(n)},className:"text-button-small",children:"remove"}),t.title]})})},Q=function(){var e=Object(c.useContext)(O).selectedRecipes;return Object(v.jsxs)("div",{id:"selected-recipe-list",children:[Object(v.jsx)("h3",{className:"header",children:"Selected Recipes"}),Object(v.jsx)("hr",{}),Object(v.jsx)("div",{className:"list",children:e.map((function(e,t){return Object(v.jsx)(F,{recipe:e,toRemove:t},t)}))})]})},M=(n(45),function(){return Object(v.jsxs)("div",{id:"shopping-page",children:[Object(v.jsx)(L,{}),Object(v.jsx)(Q,{})]})});var q=function(e){var t=Object(c.useContext)(O).handlePageChange;return Object(v.jsx)("div",{id:e.id,className:"tab-container ".concat(e.active?"active":""),onClick:function(e){var n=e.target;if(n.classList.contains("tab-container")&&!n.classList.contains("active")){var c=n.parentNode,i=Array.prototype.indexOf.call(c.children,n);t(i)}},children:e.name})},B=function(){var e=Object(c.useContext)(O).selectedPage;return Object(v.jsxs)("div",{id:"page-tab",children:[Object(v.jsx)(q,{id:"recipe-tab",name:"Recipes",index:"0",active:0===e}),Object(v.jsx)(q,{id:"shopping-tab",name:"Shopping List",index:"1",active:1===e})]})};n(46);var U=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(JSON.parse(localStorage.getItem("selectedRecipes"))||[]),a=Object(o.a)(r,2),u=a[0],l=a[1];return Object(c.useEffect)((function(){var e=JSON.stringify(u);localStorage.setItem("selectedRecipes",e)}),[u]),Object(v.jsxs)("div",{className:"main-container",children:[Object(v.jsxs)(d.a,{transitionDuration:1e3,children:[Object(v.jsx)("div",{id:"main-heading",children:"deipnon"}),1===n&&Object(v.jsx)(O.Provider,{value:{selectedRecipes:u,handleRemoveSelectedRecipe:function(e){var t=Object(s.a)(u);t.splice(e,1),l(t)}},children:Object(v.jsx)(M,{})}),0===n&&Object(v.jsx)(O.Provider,{value:{handleSelectedRecipe:function(e){l([].concat(Object(s.a)(u),[e]))}},children:Object(v.jsx)(T,{})})]}),Object(v.jsx)("div",{id:"main-footer",children:Object(v.jsx)(O.Provider,{value:{selectedPage:n,handlePageChange:function(e){i(e)}},children:Object(v.jsx)(B,{})})})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(U,{})}),document.getElementById("root")),V()}},[[47,1,2]]]);
//# sourceMappingURL=main.37e3391e.chunk.js.map