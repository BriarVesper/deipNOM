(this.webpackJsonpdeipnom=this.webpackJsonpdeipnom||[]).push([[0],{259:function(e,t,n){},267:function(e,t,n){},290:function(e,t){},292:function(e,t){},302:function(e,t){},304:function(e,t){},329:function(e,t){},331:function(e,t){},332:function(e,t){},337:function(e,t){},339:function(e,t){},358:function(e,t){},370:function(e,t){},373:function(e,t){},378:function(e,t){},380:function(e,t){},403:function(e,t){},559:function(e,t,n){},560:function(e,t,n){},561:function(e,t,n){"use strict";n.r(t);var c=n(1),i=n.n(c),r=n(140),a=n.n(r),s=(n(267),n(42)),o=n(8),u=n(260),d=n.n(u),l=n(12),j=n.n(l),p=n(59),b=n(23),f=n(261),O=n.n(f),h=Object(c.createContext)(),v=Object(c.createContext)(),m=h,x=n(0);var g=function(e){var t=e.placeholder,n=Object(c.useState)(""),i=Object(o.a)(n,2),r=i[0],a=i[1];return[r,Object(x.jsx)("div",{children:Object(x.jsx)("input",{className:"add-recipe-input small-input",type:"text",value:r,onChange:function(e){a(e.target.value)},placeholder:t})})]};var N=function(e){var t=e.placeholder,n=Object(c.useState)(""),i=Object(o.a)(n,2),r=i[0],a=i[1];return[r,Object(x.jsx)("div",{children:Object(x.jsx)("textarea",{className:"add-recipe-input big-input",type:"text",value:r,onChange:function(e){a(e.target.value)},placeholder:t})})]},S=n(57),R=n(262),w=n.n(R),C=function(){var e=Object(c.useContext)(m).dispatchRecipeEvent,t=function(){var t=Object(b.a)(j.a.mark((function t(){var c,r,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=JSON.stringify(n(k)),r={title:s,description:p,source:R,ingredients:c,instructions:J,_id:O()()},t.next=4,i(s);case 4:a=t.sent,e("ADD",{newRecipe:r,thumbnail:a});case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),n=function(e){return e&&0!==e.trim().length?e.split(/[\n,]+/).map((function(e){return e.trim()})).map((function(e){return Object(S.parse)(e,"eng")})):[{}]},i=function(){var e=Object(b.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",w()({searchTerm:t,filterOutDomains:["pinterest.com"]},(function(e,t){if(!e){if(0===t.length)return;return t[0]}console.log(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=g({placeholder:"title"}),a=Object(o.a)(r,2),s=a[0],u=a[1],d=g({placeholder:"description"}),l=Object(o.a)(d,2),p=l[0],f=l[1],h=g({placeholder:"source"}),v=Object(o.a)(h,2),R=v[0],C=v[1],y=N({placeholder:"ingredients (comma or newline separated)"}),E=Object(o.a)(y,2),k=E[0],I=E[1],P=N({placeholder:"instructions"}),D=Object(o.a)(P,2),J=D[0],_=D[1];return Object(x.jsxs)("div",{id:"add-recipe",children:[Object(x.jsx)("h3",{className:"add-recipe-header",children:"Add New Recipe"}),Object(x.jsx)("div",{className:"add-recipe-top-container",children:Object(x.jsxs)("div",{className:"small-inputs",children:[u,f,C]})}),Object(x.jsxs)("div",{className:"add-recipe-btm-container",children:[I,_,Object(x.jsx)("button",{onClick:t,children:"Add Recipe"})]})]})},y=n(58),E=function(e){var t=e.recipe,n=Object(c.useContext)(m).dispatchRecipeEvent,i=Object(c.useContext)(v).handleSelectedRecipe;return Object(x.jsxs)("div",{className:"recipe-item",style:{backgroundImage:"url("+t.image+")",backgroundPosition:"center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:[Object(x.jsxs)("div",{className:"header",children:[Object(x.jsx)("div",{className:"title",children:t.title}),Object(x.jsx)("button",{className:"select icon-button-small",onClick:function(){i(t)},children:Object(x.jsx)(y.b,{})})]}),Object(x.jsx)("div",{className:"middle",children:Object(x.jsx)("small",{children:t.description})}),Object(x.jsxs)("div",{className:"footer",children:[Object(x.jsx)("button",{onClick:function(){n("REMOVE",{id:t._id})},className:"icon-button-small",children:Object(x.jsx)(y.d,{})}),Object(x.jsx)("button",{onClick:function(){n("OPEN_EDIT",{id:t._id})},className:"icon-button-small",children:Object(x.jsx)(y.a,{})})]})]})},k=function(){var e=Object(c.useContext)(m).recipes;return Object(x.jsxs)("div",{id:"recipe-list",children:[Object(x.jsx)("div",{className:"recipe-list-header",children:Object(x.jsx)("h3",{children:"Recipes"})}),Object(x.jsx)("div",{className:"list",children:e.map((function(e){return Object(x.jsx)(E,{recipe:e},e._id)}))})]})},I=n(141),P=n.n(I),D=(n(259),{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",width:"450px"}});P.a.setAppElement("#root");var J=function(e){var t,n=e.isOpen,i=void 0!==n&&n,r=e.handleSetIsOpen,a=e.recipeToEdit,s=Object(c.useContext)(m).dispatchRecipeEvent,u=Object(c.useState)(i),d=Object(o.a)(u,2),l=d[0],j=d[1];function b(){r(!1)}Object(c.useEffect)((function(){j(i)}),[i]);var f=function(e){return e&&0!==e.trim().length?e.split(/[\n,]+/).map((function(e){return e.trim()})).map((function(e){return Object(S.parse)(e,"eng")})):[{}]},O=g({placeholder:a.title||"title"}),h=Object(o.a)(O,2),v=h[0],R=h[1],w=g({placeholder:a.description||"description"}),C=Object(o.a)(w,2),E=C[0],k=C[1],I=g({placeholder:a.source||"source"}),J=Object(o.a)(I,2),_=J[0],T=J[1],A=N({placeholder:"ingredients"}),L=Object(o.a)(A,2),F=L[0],M=L[1],Q=N({placeholder:a.instructions||"instructions"}),B=Object(o.a)(Q,2),V=B[0],q=B[1];return Object(x.jsx)("div",{children:Object(x.jsx)(P.a,{isOpen:l,onAfterOpen:function(){console.log(a),t.style.color="#cb9eff"},onRequestClose:b,style:D,contentLabel:"Edit Recipe",children:Object(x.jsxs)("div",{id:"add-recipe",children:[Object(x.jsxs)("h3",{className:"add-recipe-header",children:["Editing ",a.title]}),Object(x.jsxs)("div",{className:"add-recipe-top-container",children:[Object(x.jsx)("div",{className:"add-recipe-thumbnail",ref:function(e){return t=e},onClick:function(e){console.log("TODO")},children:Object(x.jsx)(y.c,{})}),Object(x.jsxs)("div",{className:"small-inputs",children:[R,k,T]})]}),Object(x.jsxs)("div",{className:"add-recipe-btm-container",children:[M,q,Object(x.jsx)("button",{onClick:function(){var e=0!==F.length?JSON.stringify(f(F)):JSON.stringify(a.ingredients),t=Object(p.a)(Object(p.a)({},a),{},{title:v||a.title,description:E||a.description,source:_||a.source,ingredients:e,instructions:V||a.instructions});s("EDIT",{updatedRecipe:t}),b()},children:"Edit Recipe"}),Object(x.jsx)("button",{className:"cancel-button",onClick:b,children:"Cancel"})]})]})})})},_=localStorage,T=function(){return JSON.parse(localStorage.getItem("recipes"))||[]},A={getAllRecipes:function(){var e=Object(b.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){e(T())})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),submit:function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=T();c=[].concat(Object(s.a)(c),[t.recipe]),_.setItem("recipes",JSON.stringify(c)),e(t.recipe)})).then((function(e){n&&n(e)})).catch((function(e){c&&c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),remove:function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=T(),i=c.findIndex((function(e){return e._id===t}));-1===i&&n(new Error("ID not found"));var r=c.splice(i,1);_.setItem("recipes",JSON.stringify(c)),e(r[0])})).then((function(e){n&&n(e)})).catch((function(e){c&&c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),edit:function(){var e=Object(b.a)(j.a.mark((function e(t,n,c){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var c=T(),i=c.findIndex((function(e){return e._id===t.recipe._id}));-1===i&&n(new Error("ID not found")),c[i]=t.recipe,_.setItem("recipes",JSON.stringify(c)),e(t.recipe)})).then((function(e){n&&n(e)})).catch((function(e){c&&c(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}()};var L=function(){var e=Object(c.useState)([]),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),a=Object(o.a)(r,2),u=a[0],d=a[1],l=Object(c.useState)({}),f=Object(o.a)(l,2),O=f[0],h=f[1],v=function(){return d(!u)};Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getAllRecipes();case 2:t=e.sent,n=(t||[]).map((function(e){return Object(p.a)(Object(p.a)({},e),{},{ingredients:JSON.parse(e.ingredients||"{}")})})),i(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var g=function(){var e=Object(b.a)(j.a.mark((function e(t){var c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((c=t.newRecipe).title&&c.title.trim()){e.next=3;break}return e.abrupt("return",null);case 3:A.submit({recipe:c},(function(e){var t=e;t.ingredients=JSON.parse(t.ingredients),i([].concat(Object(s.a)(n),[t])),console.log(e)}),(function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){A.remove(e.id,(function(e){var t=e;i(n.filter((function(e){return e._id!==t._id})))}),(function(e){console.log(e)}))},S=function(e){var t=n.find((function(t){return t._id===e.id}));h(t),v()},R=function(e){var t=e.updatedRecipe;A.edit({recipe:t},(function(e){var t=e;t.ingredients=JSON.parse(t.ingredients);var n=w(t);i(n),console.log(e)}),(function(e){console.log(e)}))},w=function(e){var t=n.findIndex((function(t){return t._id===e._id})),c=Object(s.a)(n);return c[t]=e,c};return Object(x.jsx)("div",{id:"recipe-page",children:Object(x.jsxs)(m.Provider,{value:{recipes:n,dispatchRecipeEvent:function(e,t){switch(e){case"ADD":return void g(t);case"REMOVE":return void N(t);case"OPEN_EDIT":return void S(t);case"EDIT":return void R(t);default:return}}},children:[Object(x.jsx)(J,{isOpen:u,handleSetIsOpen:v,recipeToEdit:O}),Object(x.jsx)(C,{}),Object(x.jsx)(k,{})]})})},F=function(){var e=Object(c.useContext)(v).selectedRecipes,t=Object(c.useState)([]),n=Object(o.a)(t,2),i=n[0],r=n[1];Object(c.useEffect)((function(){var t=[];if(0!==e.length){var n=e.map((function(e){return e.ingredients})).reduce((function(e,t){return e.concat(t)})).map((function(e){return e}));t=Object(S.combine)(n).map((function(e){return a(e)}))}r(t)}),[e]);var a=function(e){return e.unit?1===e.maxQty?e.maxQty+" "+e.unit+" of "+e.ingredient:e.maxQty+" "+e.unitPlural+" of "+e.ingredient:e.maxQty+" "+e.ingredient};return Object(x.jsxs)("div",{id:"shopping-list",children:[Object(x.jsx)("h3",{className:"header",children:"Shopping List"}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"list",children:Object(x.jsx)("ul",{children:i.map((function(e,t){return Object(x.jsx)("li",{children:e},t)}))})})]})},M=function(e){var t=e.recipe,n=e.toRemove,i=Object(c.useContext)(v).handleRemoveSelectedRecipe;return Object(x.jsx)("div",{className:"selected-recipe-item",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){i(n)},className:"text-button-small",children:"remove"}),t.title]})})},Q=function(){var e=Object(c.useContext)(v).selectedRecipes;return Object(x.jsxs)("div",{id:"selected-recipe-list",children:[Object(x.jsx)("h3",{className:"header",children:"Selected Recipes"}),Object(x.jsx)("hr",{}),Object(x.jsx)("div",{className:"list",children:e.map((function(e,t){return Object(x.jsx)(M,{recipe:e,toRemove:t},t)}))})]})},B=(n(559),function(){return Object(x.jsxs)("div",{id:"shopping-page",children:[Object(x.jsx)(F,{}),Object(x.jsx)(Q,{})]})});var V=function(e){var t=Object(c.useContext)(v).handlePageChange;return Object(x.jsx)("div",{id:e.id,className:"tab-container ".concat(e.active?"active":""),onClick:function(e){var n=e.target;if(n.classList.contains("tab-container")&&!n.classList.contains("active")){var c=n.parentNode,i=Array.prototype.indexOf.call(c.children,n);t(i)}},children:e.name})},q=function(){var e=Object(c.useContext)(v).selectedPage;return Object(x.jsxs)("div",{id:"page-tab",children:[Object(x.jsx)(V,{id:"recipe-tab",name:"Recipes",index:"0",active:0===e}),Object(x.jsx)(V,{id:"shopping-tab",name:"Shopping List",index:"1",active:1===e})]})};n(560);var z=function(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(JSON.parse(localStorage.getItem("selectedRecipes"))||[]),a=Object(o.a)(r,2),u=a[0],l=a[1];return Object(c.useEffect)((function(){var e=JSON.stringify(u);localStorage.setItem("selectedRecipes",e)}),[u]),Object(x.jsxs)("div",{className:"main-container",children:[Object(x.jsxs)(d.a,{transitionDuration:1e3,children:[Object(x.jsx)("div",{id:"main-heading",children:"deipNOM"}),1===n&&Object(x.jsx)(v.Provider,{value:{selectedRecipes:u,handleRemoveSelectedRecipe:function(e){var t=Object(s.a)(u);t.splice(e,1),l(t)}},children:Object(x.jsx)(B,{})}),0===n&&Object(x.jsx)(v.Provider,{value:{handleSelectedRecipe:function(e){l([].concat(Object(s.a)(u),[e]))}},children:Object(x.jsx)(L,{})})]}),Object(x.jsx)("div",{id:"main-footer",children:Object(x.jsx)(v.Provider,{value:{selectedPage:n,handlePageChange:function(e){i(e)}},children:Object(x.jsx)(q,{})})})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,562)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),r(e),a(e)}))};a.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(z,{})}),document.getElementById("root")),G()}},[[561,1,2]]]);
//# sourceMappingURL=main.8533747a.chunk.js.map